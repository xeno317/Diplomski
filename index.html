<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="node_modules/mathjs/lib/browser/math.js" type="text/javascript"></script>
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>
<body>
    <div>
        <canvas id="myCanvas" width="128" height="128"></canvas>
    </div>
    <div>
        <canvas id="myCanvas1" width="128" height="128"></canvas>
    </div>
   <div>
    <canvas id="myCanvas2" width="128" height="128"></canvas>
   </div>
   <div>
    <canvas id="myCanvas3" width="128" height="128"></canvas>
   </div>
   <div>
    <canvas id="myCanvas4" width="128" height="128"></canvas>
   </div>
    <script type="text/javascript">
        var x=1200;
        var y=128;
        const canvas = document.getElementById("myCanvas");
        const ctx = canvas.getContext("2d");
        var img=new Image();
        img.crossOrigin='annonymus';
        img.src="./assets/4.jpg";
        img.addEventListener("load", () => {
        ctx.drawImage(img, 0, 0);
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        const idata = imageData.data;
        var tdata=[];
        var data=[];
        for(let i=0;i<128;i++){
            data[i]=[];
            for(let j=0;j<128;j++){
                data[i][j]=0;
                tdata[i*128+j]=0;
                
            }
        }
        for(let i=0;i<idata.length/4;i++){
            tdata[i]=idata[i*4+1];
        }
    

        /*
        var data = [];
        for (var i = 0 ; i < 128; i++) {
            data[i] = [];
            for (var j = 0; j < 128; j++) {
                //data[i][j] = Math.round(Math.random() * (255 - 0) + 0);
                data[i][j]=50;
                if(i<32 && j<32){
                    data[i128][j]=200;
                }
                if(i<=32 && j>96){
                    data[i][j]=200;
                }
                if(i>=96 && j>=96){
                    data[i][j]=200;
                }
                if(i>=96 && j<=32){
                    data[i][j]=200;
                }
    }
}
        */
       
        for(let i=0;i<128;i++){
            for(let j=0;j<128;j++){
                data[i][j]=tdata[j*128+i];
            }
        }
        const canvas1 = document.getElementById("myCanvas1");
        const ctx1 = canvas1.getContext("2d");
        for(let i=0;i<128;i++){
            for(let j=0;j<128;j++){
                ctx1.fillStyle = `rgb(${data[i][j]},${data[i][j]},${data[i][j]})`;
  	            ctx1.fillRect(i, j, 1, 1);
            }
        }
        
        const canvas2 = document.getElementById("myCanvas2");
        const ctx2 = canvas2.getContext("2d");
        var result=math.fft(data);
        
        for(let i=0;i<128;i++){
            for(let j=0;j<128;j++){
                ctx2.fillStyle = `rgb(${Math.log(Math.abs(result[i][j].re))*15},${Math.log(Math.abs(result[i][j].re))*15},${Math.log(Math.abs(result[i][j].re))*15})`;
  	            ctx2.fillRect(i, j, 1, 1);
            }
        }
        
        const canvas3 = document.getElementById("myCanvas3");
        const ctx3 = canvas3.getContext("2d");
        for(let i=0;i<128;i++){
            for(let j=0;j<128;j++){
                if(i>16 && i<112){
                    result[i][j].re=0;
                    result[i][j].im=0;
                }
                if(j>16 && j<112){
                    result[i][j].re=0;
                    result[i][j].im=0;
                }
                ctx3.fillStyle = `rgb(${result[i][j].re},${result[i][j].re},${result[i][j].re})`;
  	            ctx3.fillRect(i, j, 1, 1);
            }
        }
        const canvas4 = document.getElementById("myCanvas4");
        const ctx4 = canvas4.getContext("2d");
        var resultRe=math.ifft(result);
        for(let i=0;i<128;i++){
            for(let j=0;j<128;j++){
                ctx4.fillStyle = `rgb(${resultRe[i][j].re},${resultRe[i][j].re},${resultRe[i][j].re})`;
  	            ctx4.fillRect(i, j, 1, 1);
            }
        }
        
    });
        
    </script>
</body>
</html>